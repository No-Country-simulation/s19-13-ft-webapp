import { useState, useRef, useEffect } from 'react';
import { Link } from 'react-router-dom';
import AccountDropdown from './accountDropdown';

const Navbar = () => {
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const dropdownRef = useRef(null);

  useEffect(() => {
    function handleClickOutside(event) {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsDropdownOpen(false);
      }
    }

    document.addEventListener('mousedown', handleClickOutside);
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, []);

  return (
    <nav className='bg-white shadow-lg'>
      <div className='max-w-7xl mx-auto px-4'>
        <div className='flex justify-between h-16 items-center'>
          {/* Logo */}
          <div className='flex-shrink-0 flex items-center'>
            <Link to={'/'}>
              <a href='#'>
                <svg
                  width='160'
                  height='43'
                  viewBox='0 0 160 43'
                  fill='none'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M26.6046 3.48127C25.1108 2.08551 22.6895 2.08597 21.1964 3.4823L8.73505 15.1357L8.72443 15.1328L8.68505 15.1368C8.70127 15.144 8.71719 15.1512 8.73279 15.1585C6.54681 15.3726 5.61933 15.9867 5.60883 16.7752C5.61253 17.0686 5.74128 17.3854 5.97777 17.7142L5.9664 17.7249C7.95368 20.5267 17.7986 24.2227 24.7636 21.7186C19.5436 24.1583 7.25025 24.6419 3.6395 19.9048C2.85536 20.6978 2.52728 21.7399 2.65083 22.7413C3.60469 27.6558 14.2689 28.9966 24.9332 21.8761L27.2409 24.0333C24.3693 26.7911 20.1276 42.81 26.4303 40.3642C26.5798 40.2693 26.7067 40.1844 26.8793 40.0624L27.1602 39.8145C27.144 39.8182 27.1279 39.8217 27.1119 39.8253L43.9919 24.9289C45.5592 23.5457 45.5947 21.2256 44.0702 19.8011L26.6046 3.48127ZM24.7664 8.33586L25.3433 6.17867L25.9202 8.33586L27.651 8.87517L25.9202 9.41448L25.3433 11.5717L24.7664 9.41448L23.0356 8.87517L24.7664 8.33586ZM17.6255 15.3779L18.0101 13.9398L18.3947 15.3779L19.5486 15.7374L18.3947 16.097L18.0101 17.5351L17.6255 16.097L16.4717 15.7374L17.6255 15.3779ZM31.0211 27.5085L30.6365 28.9466L29.4827 29.3062L30.6365 29.6657L31.0211 31.1038L31.4057 29.6657L32.5596 29.3062L31.4057 28.9466L31.0211 27.5085Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M54.898 11.4749H51.3159V26.584H61.2323V23.6235H54.898V11.4749Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M61.5744 21.4591C61.5744 24.6852 63.8897 26.829 67.3844 26.829C70.8574 26.829 73.1726 24.6852 73.1726 21.4591C73.1726 18.2331 70.8574 16.0689 67.3844 16.0689C63.8897 16.0689 61.5744 18.2331 61.5744 21.4591ZM64.96 21.4388C64.96 19.9074 65.921 18.8865 67.3844 18.8865C68.826 18.8865 69.7871 19.9074 69.7871 21.4388C69.7871 22.9905 68.826 24.0114 67.3844 24.0114C65.921 24.0114 64.96 22.9905 64.96 21.4388Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M73.7137 21.2958C73.7137 24.3788 75.8543 26.4615 78.8903 26.4615C80.3538 26.4615 81.6206 25.9714 82.254 25.1752V26.584C82.254 27.9928 81.3148 28.9321 79.6548 28.9321C78.1695 28.9321 77.143 28.2787 77.0774 27.1149H73.6701C73.9758 29.9121 76.2911 31.7906 79.4582 31.7906C83.1933 31.7906 85.5522 29.5242 85.5522 25.9306V16.3751H82.5161L82.3414 17.4164C81.7298 16.5793 80.4411 16.0281 78.9559 16.0281C75.898 16.0281 73.7137 18.1719 73.7137 21.2958ZM77.1211 21.2141C77.1211 19.7441 78.1696 18.764 79.5019 18.764C81.0527 18.764 82.1885 19.7236 82.1885 21.2141C82.1885 22.7047 81.0746 23.7255 79.5238 23.7255C78.1914 23.7255 77.1211 22.7047 77.1211 21.2141Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M86.5326 21.4591C86.5326 24.6852 88.8478 26.829 92.3426 26.829C95.8155 26.829 98.1308 24.6852 98.1308 21.4591C98.1308 18.2331 95.8155 16.0689 92.3426 16.0689C88.8478 16.0689 86.5326 18.2331 86.5326 21.4591ZM89.9181 21.4388C89.9181 19.9074 90.8792 18.8865 92.3426 18.8865C93.7842 18.8865 94.7452 19.9074 94.7452 21.4388C94.7452 22.9905 93.7842 24.0114 92.3426 24.0114C90.8792 24.0114 89.9181 22.9905 89.9181 21.4388Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M101.031 14.7826C102.079 14.7826 102.931 13.9863 102.931 12.9858C102.931 11.9853 102.079 11.2094 101.031 11.2094C99.9606 11.2094 99.1087 11.9853 99.1087 12.9858C99.1087 13.9863 99.9606 14.7826 101.031 14.7826ZM99.3271 26.584H102.713V16.3751H99.3271V26.584Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M104.683 31.4842H108.003V25.5631C108.637 26.339 110.078 26.8699 111.586 26.8699C114.84 26.8699 116.806 24.5423 116.718 21.3162C116.631 18.029 114.6 16.0484 111.564 16.0484C110.013 16.0484 108.55 16.6814 107.938 17.6207L107.763 16.3752H104.683V31.4842ZM108.069 21.4795C108.069 19.9483 109.161 18.9274 110.734 18.9274C112.328 18.9274 113.333 19.9686 113.333 21.4795C113.333 22.9905 112.328 24.0318 110.734 24.0318C109.161 24.0318 108.069 23.0109 108.069 21.4795Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M117.077 23.358C117.164 25.4202 118.912 26.8494 121.664 26.8494C124.307 26.8494 126.142 25.5427 126.142 23.4397C126.142 21.9288 125.18 20.9283 123.389 20.52L121.445 20.0707C120.746 19.9074 120.31 19.7441 120.31 19.2132C120.31 18.6824 120.768 18.3352 121.445 18.3352C122.21 18.3352 122.712 18.8048 122.69 19.4991H125.727C125.639 17.3757 123.914 16.0484 121.511 16.0484C119.086 16.0484 117.274 17.396 117.274 19.4378C117.274 20.8058 118.082 21.9288 120.244 22.4597L122.166 22.9292C122.734 23.0721 122.974 23.3171 122.974 23.6643C122.974 24.1747 122.472 24.5014 121.62 24.5014C120.637 24.5014 120.113 24.0726 120.113 23.358H117.077Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M131.29 26.8494C132.623 26.8494 133.955 26.2778 134.632 25.4406L134.851 26.584H138.018V16.3752H134.654V21.6838C134.654 23.2151 134.173 24.0522 132.623 24.0522C131.421 24.0522 130.635 23.5418 130.635 21.6429V16.3752H127.271V22.7863C127.271 25.216 128.713 26.8494 131.29 26.8494Z'
                    fill='#2546A5'
                  />
                  <path
                    d='M143.352 26.584V21.01C143.352 19.2948 144.335 18.8048 145.296 18.8048C146.366 18.8048 147.065 19.4174 147.065 20.6833V26.584H150.385V21.01C150.385 19.2745 151.346 18.7845 152.307 18.7845C153.377 18.7845 154.098 19.3969 154.098 20.6833V26.584H157.375V19.9074C157.375 17.5798 156.064 16.0281 153.246 16.0281C151.674 16.0281 150.385 16.7427 149.817 17.8452C149.162 16.7427 148.026 16.0281 146.213 16.0281C145.012 16.0281 143.898 16.5385 143.243 17.3552L143.112 16.3751H139.966V26.584H143.352Z'
                    fill='#2546A5'
                  />
                  <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M45.2918 4.9088C41.6831 4.9088 38.2608 6.40717 35.9505 8.99867L27.7315 18.2183L32.4775 11.5635L24.5995 14.7196C23.599 15.1205 23.348 16.339 24.1176 17.0585L26.6528 19.4282L25.3584 20.8802L28.2061 23.5421L29.7593 22.3321L32.2945 24.702C33.0641 25.4214 34.3677 25.1868 34.7964 24.2516L38.1727 16.8874L31.0537 21.3239L40.9166 13.6408C43.6889 11.4813 45.2918 8.28217 45.2918 4.9088ZM37.4609 12.2292C38.2472 12.9642 39.5221 12.9642 40.3085 12.2292C41.0948 11.4941 41.0948 10.3023 40.3085 9.56731C39.5221 8.8322 38.2472 8.8322 37.4609 9.56731C36.6745 10.3023 36.6745 11.4941 37.4609 12.2292Z'
                    fill='#D532D9'
                  />
                  <path
                    opacity='0.6'
                    d='M3.54794 19.7808C5.4334 25.8193 16.8966 25.5045 24.7614 21.7195C19.495 24.1795 7.03696 24.6493 3.54794 19.7808Z'
                    fill='#424242'
                  />
                  <path
                    opacity='0.6'
                    d='M26.4303 40.3642C21.1195 42.425 23.2955 31.3755 25.8299 26.1968C23.9825 30.7999 22.4055 40.947 27.1602 39.8144L26.8793 40.0623C26.7067 40.1844 26.5798 40.2693 26.4303 40.3642Z'
                    fill='#424242'
                  />
                </svg>
              </a>
            </Link>
          </div>

          {/* Botones de la derecha */}
          <div className='flex items-center space-x-4'>
            <Link to={'crear-juego'}>
              <button className='flex flex-row items-center  px-4 py-2 gap-2 fill-black hover:text-blue-950  hover:fill-blue-950 transition duration-500'>
                <svg
                  width='18'
                  height='19'
                  viewBox='0 0 18 19'
                  className=' '
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path d='M6.75 4.25C6.75 3.85218 6.90804 3.47064 7.18934 3.18934C7.47064 2.90804 7.85218 2.75 8.25 2.75H9.75C10.1478 2.75 10.5294 2.90804 10.8107 3.18934C11.092 3.47064 11.25 3.85218 11.25 4.25V7.25H14.25C14.6478 7.25 15.0294 7.40804 15.3107 7.68934C15.592 7.97064 15.75 8.35218 15.75 8.75V10.25C15.75 10.6478 15.592 11.0294 15.3107 11.3107C15.0294 11.592 14.6478 11.75 14.25 11.75H11.25V14.75C11.25 15.1478 11.092 15.5294 10.8107 15.8107C10.5294 16.092 10.1478 16.25 9.75 16.25H8.25C7.85218 16.25 7.47064 16.092 7.18934 15.8107C6.90804 15.5294 6.75 15.1478 6.75 14.75V11.75H3.75C3.35218 11.75 2.97064 11.592 2.68934 11.3107C2.40804 11.0294 2.25 10.6478 2.25 10.25V8.75C2.25 8.35218 2.40804 7.97064 2.68934 7.68934C2.97064 7.40804 3.35218 7.25 3.75 7.25H6.75V4.25Z' />
                </svg>
                <p className='hidden md:inline'>Crear actividad</p>
              </button>
            </Link>
            <div className='relative' ref={dropdownRef}>
              <button
                onClick={() => setIsDropdownOpen(!isDropdownOpen)}
                className={` flex flex-row items-center gap-2 text-black px-4 py-2 rounded-md fill-black hover:text-blue-950 hover:fill-blue-950 transition duration-500 ${
                  isDropdownOpen ? 'bg-blue-800 text-white' : ''
                }`}
              >
                <svg
                  width='17'
                  height='17'
                  viewBox='0 0 17 17'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path
                    fillRule='evenodd'
                    clipRule='evenodd'
                    d='M8.49999 2.16671C7.39226 2.1665 6.30384 2.45684 5.34339 3.00875C4.38293 3.56065 3.58403 4.35481 3.02642 5.31196C2.46881 6.26911 2.17199 7.35578 2.1656 8.46349C2.15921 9.57121 2.44346 10.6612 2.98999 11.6247C3.35939 11.1447 3.83425 10.756 4.37785 10.4887C4.92145 10.2214 5.51924 10.0827 6.12499 10.0834H10.875C11.4807 10.0827 12.0785 10.2214 12.6221 10.4887C13.1657 10.756 13.6406 11.1447 14.01 11.6247C14.5565 10.6612 14.8408 9.57121 14.8344 8.46349C14.828 7.35578 14.5312 6.26911 13.9736 5.31196C13.4159 4.35481 12.617 3.56065 11.6566 3.00875C10.6961 2.45684 9.60772 2.1665 8.49999 2.16671ZM14.7882 13.3102C14.8874 13.1809 14.9824 13.0484 15.0732 12.9128C15.9509 11.6087 16.4187 10.072 16.4167 8.50004C16.4167 4.12767 12.8724 0.583374 8.49999 0.583374C4.12761 0.583374 0.583321 4.12767 0.583321 8.50004C0.580826 10.2391 1.15335 11.9303 2.21178 13.3102L2.20782 13.3245L2.48886 13.6514C3.23136 14.5195 4.15325 15.2162 5.19101 15.6936C6.22876 16.171 7.35769 16.4177 8.49999 16.4167C8.67099 16.4167 8.84093 16.4114 9.00982 16.4009C10.4383 16.3108 11.8152 15.8332 12.9927 15.0194C13.5558 14.6309 14.0662 14.1711 14.5111 13.6514L14.7922 13.3245L14.7882 13.3102ZM8.49999 3.75004C7.8701 3.75004 7.26601 4.00026 6.82061 4.44566C6.37521 4.89106 6.12499 5.49515 6.12499 6.12504C6.12499 6.75493 6.37521 7.35902 6.82061 7.80442C7.26601 8.24982 7.8701 8.50004 8.49999 8.50004C9.12988 8.50004 9.73397 8.24982 10.1794 7.80442C10.6248 7.35902 10.875 6.75493 10.875 6.12504C10.875 5.49515 10.6248 4.89106 10.1794 4.44566C9.73397 4.00026 9.12988 3.75004 8.49999 3.75004Z'
                  />
                </svg>
                <svg
                  width='13'
                  height='7'
                  viewBox='0 0 13 7'
                  className='md:hidden'
                  xmlns='http://www.w3.org/2000/svg'
                >
                  <path
                    d='M1 1L6.5 6L12 1'
                    stroke='black'
                    strokeWidth='1.5'
                    strokeLinecap='round'
                    strokeLinejoin='round'
                  />
                </svg>

                <p className='hidden md:inline'>Mi Cuenta</p>
              </button>
              <AccountDropdown isOpen={isDropdownOpen} />
            </div>
          </div>
        </div>
      </div>
    </nav>
  );
};

export default Navbar;
